# ğŸ“± Mini Workshop 2: ãƒšãƒƒãƒˆã®æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ Mobile ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§‹ç¯‰

| **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚´ãƒ¼ãƒ«** | ãƒ©ãƒ³ãƒ€ãƒ ã«ãƒšãƒƒãƒˆã‚’è¡¨ç¤ºã™ã‚‹ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚’ NativeScript-Vue ã§æ§‹ç¯‰ |
| ----------------- | ------------------------------------------------------- |
| **ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§å­¦ã¶ã“ã¨** | NativeScript ã¨ Vue.js ã§ã®ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®ä½œã‚Šæ–¹ã€API ã‚³ãƒ¼ãƒ«ã¨ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã®ä»•æ–¹ |
| **å¿…è¦ãªãƒ„ãƒ¼ãƒ«** | ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆä¾‹ï¼šChromeï¼‰<br><br>[NativeScript Playground](http://play.nativescript.org)ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã®ãŸã‚ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã‚’æ¨å¥¨ã—ã¾ã™ï¼‰<br><br>iOS ã¾ãŸã¯ Android ã®ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã¨ NativeScript Playgroundã€Preview ã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«<br><br>Playground ç”¨ã« NativeScript Viewer ã¨ NativeScript Playground ã®äºŒã¤ã®ã‚¢ãƒ—ãƒªãŒã‚»ãƒƒãƒˆã§å¿…è¦ã§ã™ã€‚<br><br>Android: [NativeScript Playground](https://play.google.com/store/apps/details?id=org.nativescript.play) / [NativeScript Preview](https://play.google.com/store/apps/details?id=org.nativescript.preview).<br><br>iOS: [NativeScript Playground](https://itunes.apple.com/jp/app/nativescript-playground/id1263543946) / [NativeScript Preview](https://itunes.apple.com/jp/app/nativescript-preview/id1264484702) |
| **ã‹ã‹ã‚‹æ™‚é–“** | 20åˆ† |
| **ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚’è©¦ã—ãŸã„å ´åˆ**   | [Playground App ã§é–‹ã](https://play.nativescript.org/?template=play-vue&id=c3o4tl&v=2) |

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŸºç›¤ã®æ§‹ç¯‰

[NativeScript Playground](http://play.nativescript.org) ã‚’é–‹ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚åˆã‚ã¦é–‹ã„ãŸã¨ãã¯ä¸»ãªæ©Ÿèƒ½ã®ç®‡æ‰€ã‚’ç¤ºã™ãƒãƒ¼ã‚¯ãŒã„ãã¤ã‹è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

![NS + Vue.js Playground é¸æŠæ™‚ã®ãƒãƒ¼ã‚¯](./images/playground1.png)

ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ã¨æ•°ä»¶ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® Playground ã‚¢ãƒ—ãƒªã¯ Angular ã§ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸Šéƒ¨ã® 'New' ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ 'NS + Vue.js' ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸ã‚“ã§ãã ã•ã„ã€‚ã“ã‚Œã§ NativeScript-Vue ã‚¢ãƒ—ãƒªã®åŸºç›¤æ§‹ç¯‰ãŒã§ãã¾ã™ï¼

`QR Code` ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ QR ã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã«å…¥ã£ã¦ã„ã‚‹ Playground ã‚¢ãƒ—ãƒªã§ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ãã ã•ã„ã€‚ã‚ãªãŸã®ç«¯æœ«ãŒã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ã«å¿œã˜ã¦è‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ç«¯æœ«ãŒæ›´æ–°ã•ã‚Œã€ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã‚¢ãƒ—ãƒªãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ï¼š

![ãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ—ãƒª](./images/playground2.png)

## ã‚¹ã‚¿ã‚¤ãƒ«ã®è¿½åŠ 

ã§ã¯ã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ–½ã—ã€ UI ã‚’æ§‹ç¯‰ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ ActionBar ã¨ Cardã€ãƒœã‚¿ãƒ³ã‚’ä½¿ã„ã¾ã™ã€‚

`/images` ãƒ•ã‚©ãƒ«ãƒ€ã‚’æ–°è¦ä½œæˆã—ã€ã‚¢ãƒ—ãƒªã®èƒŒæ™¯ç”¨ã®ç”»åƒã‚’è¿½åŠ ã—ã¾ã™ã€‚ä¸Šéƒ¨ã®ãƒ‘ãƒãƒ«ã® '+' ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ images ã¨ã„ã†åç§°ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã£ã¦ãã ã•ã„ã€‚ä¸‹è¨˜ã®ç”»åƒã‚’ãƒ­ãƒ¼ã‚«ãƒ«PCã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€å†åº¦ '+' ãƒœã‚¿ãƒ³ã¨ 'upload resources' ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ–ãƒ©ã‚¦ã‚ºã—ã¾ã™ã€‚ä½œæˆã—ãŸãƒ•ã‚©ãƒ«ãƒ€ã« `bg.jpg` ã¨ã—ã¦ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜ã‚’ãŠå¿˜ã‚Œãªãï¼

![èƒŒæ™¯ç”»åƒ](./images/bg.jpg)

æ¬¡ã«ã€ãƒ«ãƒ¼ãƒˆã«ã‚ã‚‹ app.css ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¾ã™ã€‚ã“ã®ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ãã—ã¦ãã ã•ã„ï¼š

```css
Page {
	background-image: url('~/images/bg.jpg');
}

.action-bar {
	background-color: #32292f;
	color: #f0f7f4;
	font-size: 20px;
}
.btn {
	background-color: #70abaf;
	color: white;
	padding: 10px;
	margin: 20px;
	font-size: 30px;
	border-radius: 5px;
}
.card {
	vertical-align: top;
	margin: 15;
	padding: 15;
	border-radius: 5;
	background-color: #99e1d9;
}

.placeholder {
	height: 100%;
}
```

ã‚¢ãƒ—ãƒªãŒæ›´æ–°ã•ã‚Œã‚‹ã¨ UI ãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ãŒã€å°‘ã—ä¸è‡ªç„¶ã§ã™ã€‚ UI ã‚’ä¿®æ­£ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

## UI ã®ä¿®æ­£

ActionBar ã‚’ä¿®æ­£ã—ã¾ã™ã€‚ `app/components/HelloWorld.vue` ã‚’é–‹ãã€ActionBar ä»¥å¤–ã® `<Page>` ã‚¿ã‚°ã®é–“ã®å†…å®¹ã‚’å…¨ã¦å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚ãã—ã¦ ActionBar ã«ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚ä¾‹ï¼š `<ActionBar title="So. Many. Dogs!" class="action-bar" />`

æ¬¡ã«ã€ä»Šã‚ã‚‹ ScrollView ã®ä»£ã‚ã‚Šã« StackLayout ã‚’è¿½åŠ ã—ã¾ã™ã€‚ActionBar ã®ä¸‹ã€ `</Page>` ã®é–‰ã˜ã‚¿ã‚°ã®ä¸Šã®å ´æ‰€ã«ã€ã“ã®ã‚ˆã†ã«ãƒœã‚¿ãƒ³ä»˜ãã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼š

```xml
    <StackLayout class="card">
        <Button class="btn" @tap="getADog">Find Me A Dog!</Button>
    </StackLayout>
```

ã“ã‚Œã§ã€ã„ã„æ„Ÿã˜ã®ç·‘è‰²ã®ã‚«ãƒ¼ãƒ‰ã¨æ¿ƒã„ç·‘è‰²ã®ãƒœã‚¿ãƒ³ãŒè¦‹ãˆã‚‹ã¯ãšã§ã™ã€‚

::: tip ğŸ’¡
NativeScript ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ Web ã§ä½¿ã† HTML ã¨ã¯ç•°ãªã‚Šã¾ã™ã€‚ã“ã“ã§åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã¯ NativeScript XML ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã§ã€ãƒã‚¤ãƒ†ã‚£ãƒ–UIã® GridLayouts ã‚„ StackLayouts ã«å¤‰æ›ã•ã‚Œã‚‹ã‚‚ã®ã§ã™ã€‚
:::

## ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ 

ã“ã“ã‹ã‚‰ã¯ UI ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥ã—ã¦ã„ãã¾ã™ã€‚å¤–éƒ¨ã¨ HTTP é€šä¿¡ã‚’ã™ã‚‹ãŸã‚ã« HTTP ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ´»ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ HelloWorld.vue ã® `<script>` ã‚¿ã‚°ã®ç›´ä¸‹ã®è¡Œï¼ˆ`export default` ã®ä¸Šï¼‰ã«ã“ã¡ã‚‰ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼š

`const http = require("http");`

ãã—ã¦ `data` ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç·¨é›†ã—ã¾ã™ã€‚çŠ¬ã®ç”»åƒã®åˆæœŸå€¤ã‚’è¨­å®šã—ã¦ãŠãã¾ã™ã€‚å¾Œã»ã©ã™ãã« Dog CEO API ã®ãƒ‡ãƒ¼ã‚¿ãŒã“ã“ã«æŠ•å…¥ã•ã‚Œã‚‹äºˆå®šã§ã™ã€‚

```js
data() {
    return {
      dogImage: {}
    }
  },
```

æœ€å¾Œã«ã€ç”»åƒã‚’æŠ•å…¥ã™ã‚‹ãŸã‚ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚Button ã‚¿ã‚°ã®ä¸‹ã€æœ€å¾Œã® `</StackLayout>` é–‰ã˜ã‚¿ã‚°ã®ä¸Šã«ã“ã‚Œã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼š

```xml
 <StackLayout class="placeholder">
      <Image :src="dogImage.message" />
 </StackLayout>
```

::: tip ğŸ’¡
ç«¯æœ«ã§ã‚¢ãƒ—ãƒªã®è‡ªå‹•æ›´æ–°ãŒæ­¢ã¾ã£ã¦ã—ã¾ã£ãŸã‚‰ã€"Preview" ãƒœã‚¿ãƒ³ã‚’æ¨ã—ã¦ QR ã‚³ãƒ¼ãƒ‰ã®å†ã‚¹ã‚­ãƒ£ãƒ³ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚Playground ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚
:::

## é€šä¿¡ã™ã‚‹

æœ€å¾Œã«ã‚„ã‚‹ã“ã¨ã¯ã€Dog CEO API ã‚’å‘¼ã¶ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰ã‚«ãƒ¼ãƒ‰ã«ãƒ‡ãƒ¼ã‚¿ãŒæŠ•å…¥ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã™ã€‚ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã‚ˆã† API ã«å•ã„åˆã‚ã›ã¾ã™ã€‚

`methods` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ `data` ãƒ–ãƒ­ãƒƒã‚¯ã®æœ€å¾Œã®ã‚«ãƒ³ãƒã®ä¸‹ã«è¿½åŠ ã—ã¦ãã ã•ã„ï¼š

```js
methods: {
    getADog() {
      http.request({ url: "https://dog.ceo/api/breeds/image/random", method: "GET" }).then((response) => {
        this.dogImage = JSON.parse(response.content);
        console.log(this.dogImage.message);
      }, (e) => {
        alert("error")
      });
    }

  }
```

ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦çŠ¬ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚å¯æ„›ã„ã§ã—ã‚‡ï¼Ÿã‚‚ã—ä½•ã‹ä¸å…·åˆãŒã‚ã£ãŸã‚‰ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«çŠ¬ã®ç”»åƒã®URLã®ãƒ­ã‚°ãŒå‡ºã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚

HelloWorld.vue ã®å…¨ä½“ã®ã‚³ãƒ¼ãƒ‰ã¯ã“ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¯ãšã§ã™ï¼š

```js
<template>
	<Page class="page">
		<ActionBar title="So. Many. Dogs!" class="action-bar" />
		<StackLayout class="card">
			<Button class="btn" @tap="getADog">Find Me A Dog!</Button>
			<StackLayout class="placeholder">
				<Image :src="dogImage.message" />
			</StackLayout>
		</StackLayout>
	</Page>
</template>

<script>

const http = require("http");

  export default {

  data() {
    return {
      dogImage: {}
    }
  },
  methods: {
    getADog() {
      http.request({ url: "https://dog.ceo/api/breeds/image/random", method: "GET" }).then((response) => {
        this.dogImage = JSON.parse(response.content)
        console.log(this.dogImage.message)
      }, (e) => {
        alert("error")
      });
    }
  }
}

</script>
```

æœ€çµ‚çš„ãªã‚¢ãƒ—ãƒªã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ï¼š

![æœ€çµ‚çš„ãªã‚¢ãƒ—ãƒª](./images/playground3.png)

NativeScript Playground ã§ Vue.js ã® ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹ã®ã¯ã¨ã¦ã‚‚æ¥½ã—ã„ã§ã™ã­ã€‚ã“ã‚Œã§ã‚„ã‚Šæ–¹ãŒã‚ã‹ã£ãŸã®ã§ã€æ¬¡ã¯ä½•ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ï¼Ÿ

**ğŸŠãƒ™ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¿®äº†ã§ã™ã€‚ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ğŸŠ**

## Supplement 1: Adding a Cat to the App

Suppose you want to also be able to load cute cat photos with your dog photos. This will require another API request. The cat API requires a key which you can request at [the CatAPI](https://thecatapi.com/). They will email your new api key to you. Make a note of it when you receive the key via email.

## Edit the UI

Update the ActionBar to indicate we have more than dogs on the app.

`<ActionBar title="So. Many. Cute. Pets!" class="action-bar" />`

Update the placeholder size in the `app.css` file so that we can fit more than one placeholder on the page:

```js
    .placeholder {
        height: 30%;
    }
```

## Call Some Cats

Next, add a method called `getACat`. It will look like the `getADog` method. But the Cat API requires an api key, so after we pass the url and the method, we will pass a limit of 1 and a header with the key. After making the request, the `getACat` method will update a variable called `catImage` and log the `catImage.url` that is returned by the request.

Add this method above the `getADog` method, adding your own API key for the Cat API:

```js
        methods: {
            getACat() {
                http.request({
                    url: "https://api.thecatapi.com/v1/images/search",
                    method: "GET",
                    limit: 1,
                    header: {
                        key: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
                    }
                }).then(
                    response => {
                        this.catImage = JSON.parse(response.content)[0];
                        console.log(this.catImage.url);
                    },
                    e => {
                        alert("error");
                    }
                );
            },
            getADog() {
            ...
            }
        }
```

Now you need to update the image that will be added to the placeholder.

In the `data()` part of the script, we returned the `dogImage`, and now we need to return the `catImage`. Add `catImage` above `dogImage` in the data block:

```js
    data() {
        return {
                catImage: {},
                dogImage: {}
            };
        },
```

::: tip ğŸ’¡
Don't forget the comma that we use to separate the two methods (`getADog` and `getACat`) and the two return variables (`dogImage` and `catImage`).
:::

## Edit the UI

Finally, we need to add a button to load the cat within a `StackLayout` placeholder. Place this in between `<StackLayout class="card">` and `</StackLayout>` at the same level as the button and placeholder for the `dogImage`:

```xml
    <Button class="btn" @tap="getACat">Find Me A Cat!</Button>
    <StackLayout class="placeholder">
        <Image :src="catImage.url" />
    </StackLayout>
```

Click the `Preview` button in the NativeScript Playground and you will see the new `Find Me A Cat!` button and when you click it, you should see a very cute cat!

It should look like this:

![Image of the Pets App with a Cute Dog and Cute Cat Photo loaded](./images/mini2_2.png)

::: tip ğŸ’¡
If you are having any trouble loading the images from the cat api, you can get more information in the `Device Logs` at the bottom of the Playground screen. To do this, you need to set `Config.silent = false` in `app.js`. By default, in `app.js` you should see the lines below commented out. Uncomment the second line to get more verbose output.

    // Uncommment the following to see NativeScript-Vue output logs
    Vue.config.silent = false;

:::

## è‘—è€…

Made with â¤ï¸ by Jen Looper and Emily Stamey
