# üñ•Ô∏è 1 : Cr√©er une petite application Web de r√©cup√©ration d'images d'animaux de compagnie

| **But du projet**                             | D√©marrer avec les bases de Vue.js et les appels API simples                                                                                                                                 |
| --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Ce que vous apprendrez**                    | Configuration de votre application Vue, principes de base des composants, ex√©cution d'appels API REST simples √† l'aide d'Axios                                                              |
| **Outils dont vous aurez besoin**             | Un navigateur moderne comme Chrome. Un acc√®s √† [CodeSandbox](https://codesandbox.io) (assurez-vous de cr√©er un compte dans CodeSandbox pour garder les versions de votre travail intactes.) |
| **Temps n√©cessaire pour terminer**            | 1 heure                                                                                                                                                                                     |
| **Vous voulez juste essayer l'application ?** | [lien vers CodeSandbox](https://codesandbox.io/s/web-1-mini-workshop-koj8w)                                                                                                                 |

# Instructions

## Cr√©ez votre application

Nous partirons de z√©ro dans [CodeSandbox](http://codesandbox.io). Cr√©ez un compte CodeSandbox et utilisez un template de d√©marrage Vue.js en cliquant [ici](https://codesandbox.io/s/vue).

Nous allons cr√©er une application pour charger des images al√©atoires de chiens et les stocker dans une liste de favoris :

![random dog app](./images/mini2_1.png)

Jetez un ≈ìil au code qui a √©t√© cr√©√© par CodeSandbox pour une application de base Vue.js. Le fichier `main.js` est ouvert par d√©faut. Il s'agit du point de d√©part principal d'une application Vue.js. Notez que dans ce fichier vous importez Vue depuis son package npm : `import Vue from "vue";`. CodeSandbox importe toutes les d√©pendances n√©cessaires √† partir de npm pour cr√©er l'application. Vous pouvez toujours consulter le fichier racine `package.json` pour savoir quelles d√©pendances sont n√©cessaires.

`main.js` initialise √©galement l'application en tant que nouvelle application Vue.js et d√©finit la div dans laquelle le code de l'application sera inject√©.

```js
new Vue({
	render: (h) => h(App),
}).$mount('#app');
```

Ouvrez `App.vue`. Dans ce fichier, le composant 'home' est construit. Il contient les trois parties principales d'un composant monofichier Vue.js (Single File Component) : un mod√®le, un bloc de script et un bloc de style.

Notez que la premi√®re div dans le bloc template a l'ID _app_, c'est la div o√π le code de l'application sera inject√©. Il y a aussi un composant `<HelloWorld>` inclus sous l'image du logo. Ceci est un exemple d'un composant monofichier inclus dans `App.vue`.

Ouvrez `components/HelloWorld.vue` et vous trouverez la source de la liste des liens qui apparaissent int√©gr√©s dans `App.vue`. Ce fichier comprend √©galement un bloc de script avec une variable `msg` et quelques autres styles dans un bloc `<style>`.

Nous allons d√©couper cet exemple d'application et le recr√©er !

## Ajouter les styles

Commen√ßons par `App.vue`, car nous n'avons pas √† apporter de modifications √† `main.js`. Ajoutez le bloc de style suivant en bas du fichier, en rempla√ßant le bloc `<style>` actuel :

```css
<style>
img {
  max-width: 100%;
}

h1 {
  padding-bottom: 15px;
}

.dogs-layout {
  width: 100%;
  background: #fff center repeat;
  background-image: url("https://github.com/FrontEndFoxes/projects/blob/main/petshop/images/bg3.jpg?raw=true");
}

.dogs-overlay {
  width: 100%;
  padding: 20px;
  background-color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
}

@media (max-width: 768px) {
  .dogs-overlay {
    margin: 0;
  }
}

.dog-card {
  width: 100%;
  max-width: 600px;
}
</style>
```

::: tip üí°
Notez que nous n'utilisons pas `<scoped>` dans le bloc de style. Le mot cl√© 'scoped' garantit que vos styles resteront valables uniquement pour le composant monofichier actuel, mais nous allons rendre ces styles universels.
:::

Ce bloc de style utilise un chemin vers une image externe h√©berg√©e sur Github, plut√¥t que vers un chemin relatif. En effet, CodeSandbox n'h√©berge pas facilement les images ; normalement, vous ajouteriez simplement une image sur un chemin relatif tel que `/images/monImage.png`.

L'ajout de la feuille de style n'a pas fait grand-chose √† notre template, √† part casser les styles existants. Corrigeons le !

::: warning ‚òïÔ∏è Pause! ‚òïÔ∏è
C'est un bon moment de rejoindre un 'breakout room' sur Zoom!
:::

## Installer Vuetify

Avant de modifier le template, nous allons installer Vuetify. Vuetify est une biblioth√®que populaire qui donne un style Material Design √† vos applications Vue.

::: tip üí°
Vuetify est un framework de composants s√©mantiques pour Vue. Il vise √† fournir des composants propres, s√©mantiques et r√©utilisables pour la construction de votre application. Vous pouvez trouver une documentation compl√®te √† ce sujet [sur leur site](https://vuetifyjs.com/en/getting-started/quick-start).
:::

Installez-le en cliquant sur le bouton ¬´ Add Dependency ¬ª dans la liste d√©roulante ¬´ Dependency ¬ª √† gauche dans CodeSandbox. Recherchez ¬´ Vuetify ¬ª.

Cliquez ensuite sur la biblioth√®que dans la liste pour l'installer.

V√©rifiez si la d√©pendance est install√©e en ouvrant le fichier `package.json` et en v√©rifiant l'objet ¬´ dependencies ¬ª. √áa devrait ressembler √† cela :

```json
"dependencies": {
    "vue": "^2.6.10",
    "vuetify": "^2.0.19"
},
```

Vuetify fonctionne via une structure de plugin. Dans le dossier `/src` de votre projet, cr√©ez un nouveau dossier appel√© `plugins` et √† l'int√©rieur de celui-ci un nouveau fichier appel√© `vuetify.js`.

::: tip üí°
Dans CodeSandbox, faites un clic droit sur le nouveau dossier pour cr√©er un nouveau fichier. Faites attention √† bien les cr√©ez dans le dossier `/src` !
:::

Dans le nouveau fichier `vuetify.js`, ajoutez ce code pour initier le plugin:

```js
import Vue from 'vue';
import Vuetify from 'vuetify';
import 'vuetify/dist/vuetify.min.css';
Vue.use(Vuetify);

export default new Vuetify();
```

Ensuite, initialisez Vuetify en ouvrant le fichier `main.js` et en ajoutant ces lignes sous le deuxi√®me `import` (ligne 3) :

```js
import vuetify from '@/plugins/vuetify';
```

Ensuite, modifiez l'initialisation de Vue en bas de `main.js` comme ceci :

```js
new Vue({
	vuetify,
	render: (h) => h(App),
}).$mount('#app');
```

Cela garantit que les th√®mes et composants de Vuetify seront disponibles dans l'application Vue.

Nous allons utiliser des ic√¥nes dans cette application, nous devons donc √©galement ajouter les ic√¥nes Material Design dans la partie `head` du fichier `index.html`. Ce fichier se trouve dans le dossier `public`. Ins√©rez cette ligne apr√®s la balise `<title>`:

```html
<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons" rel="stylesheet" />
```

Modifions √©galement le titre de la page en `Amoureux des chiens`. Pour ce faire, nous devons changer le contenu de la balise `title`:

```html
<title>Amoureux des chiens</title>
```

Ensuite, √©crasez le template actuel dans `App.vue` avec ce code :

```html
<template>
	<v-app>
		<v-main class="dogs-layout">
			<v-container fill-height>
				<div class="dogs-overlay">
					<h1 class="display-2 text-xs-center">Choisissez vos chiens pr√©f√©r√©s</h1>
					<v-card class="dog-card">
						<v-img height="400px"></v-img>
						<v-card-actions>
							<v-spacer></v-spacer>
							<v-btn icon>
								<v-icon>favorite</v-icon>
							</v-btn>
							<v-btn icon>
								<v-icon>forward</v-icon>
							</v-btn>
						</v-card-actions>
					</v-card>
				</div>
			</v-container>
		</v-main>
	</v-app>
</template>
```

Votre application devrait s'√™tre actualis√©e (si ce n'est pas le cas, utilisez le bouton d'actualisation dans la barre d'adresse d'aper√ßu de l'application). Wow, cela a fait un sacr√© changement !

::: tip üí°
Notez l'utilisation de `<v-app>` dans ce code, c'est un pr√©-requis de Vuetify et c'est un signe certain que vous aurez une application faite avec Vuetify. Nous utilisons √©galement un tas d'√©l√©ments de pr√©sentation Vuetify comme `v-container` et des composants d'interface utilisateur comme`v-card` et `v-btn`.
:::

## Ajouter des donn√©es

√Ä ce stade, nous devons commencer √† remplir notre interface utilisateur avec des donn√©es. La premi√®re chose que nous voulons faire est d'afficher une image de chien √† l'int√©rieur de notre `v-card`. Ajoutons un lien statique juste pour tester son apparence. Dans le fichier `App.vue`, modifiez la propri√©t√© `src` de `v-img` :

```html
<v-img height="400px" src="https://images.dog.ceo/breeds/chihuahua/n02085620_3407.jpg"></v-img>
```

Comme c'est mignon ! üê∂

Mais l'id√©e est de rendre ce lien dynamique, il est donc temps de cr√©er votre premi√®re variable Vue. Tout d'abord, vous devez ajouter `data()` √† votre composant Vue. Cette fonction doit renvoyer un objet de nos variables Vue. Cr√©ons-en une dans le bloc `<script>`. Remplacez le bloc `<script>` actuel dans `App.vue` :

```js
<script>
export default {
  data() {
    return {
      currentDogLink: ""
    };
  }
};
</script>
```

::: tip üí°
√Ä ce stade, vous pouvez supprimer le fichier `HelloWorld.vue` du dossier `components` car nous n'en aurons pas besoin. Cliquez avec le bouton droit sur le fichier dans CodeSandbox et cliquez sur ¬´ delete ¬ª.
:::

Vous avez maintenant une variable appel√©e `currentDogLink` et sa valeur par d√©faut est une cha√Æne vide. Nous utiliserons cette variable pour fournir un lien vers l'image de chien dans `v-img`. Tout d'abord, nous allons d√©finir la valeur de `currentDogLink` en √©crasant le bloc de donn√©es que nous venons d'ajouter dans`App.vue` :

```js
data() {
  return {
    currentDogLink: "https://images.dog.ceo/breeds/chihuahua/n02085620_3407.jpg"
  };
}
```

Maintenant, nous devons modifier le template pour rendre la propri√©t√© `src` _dynamique_ afin qu'elle puisse utiliser la valeur de la variable que nous venons de cr√©er ci-dessus. Pour ce faire, nous avons besoin d'une directive `v-bind` ou de son raccourci `:`. Encore une fois dans `App.vue`, modifiez la balise`<v-img>`pour supprimer sa valeur cod√©e en dur :

```html
<v-img height="400px" :src="currentDogLink"></v-img>
```

::: tip üí°
La directive `v-bind` lie dynamiquement un ou plusieurs attributs, ou une propri√©t√© de composant √† une expression. Ce petit `:` fait toute la diff√©rence !
:::

G√©nial ! Il est maintenant temps de charger des images de chiens depuis une API !

::: warning ‚òïÔ∏è Pause! ‚òïÔ∏è
C'est un bon moment de rejoindre un 'breakout room' sur Zoom!
:::

## Ajouter Axios

Pour effectuer des appels API, nous aurons besoin d'une biblioth√®que appel√©e [Axios](https://github.com/axios/axios). Il s'agit d'un client HTTP bas√© sur les promesses qui fonctionne √† la fois dans le navigateur et dans d'autres environnements node.js.

::: tip üí°
√Ä l'origine, Vue supportait sa propre fa√ßon de faire des appels API en utilisant .ajax ; mais cette ressource a √©t√© d√©pr√©ci√©e car la biblioth√®que axios fonctionnait tr√®s bien pour cela, supprimant le besoin d'une solution int√©gr√©e. En savoir plus sur cette d√©cision [ici](https://medium.com/the-vue-point/retiring-vue-resource-871a82880af4).
:::

Tout d'abord, ajoutez la biblioth√®que Axios √† vos d√©pendances de projet. Pour ce faire, dans CodeSandbox, cliquez sur le bouton ¬´ Add Dependency ¬ª et recherchez ¬´ axios ¬ª. Installez la derni√®re version.

Importez Axios dans le composant o√π nous effectuerons notre appel d'API : `App.vue`. Dans le bloc de script de ce composant, ajoutez cette ligne juste en-dessous de `<script>` :

```js
import axios from 'axios';
```

√Ä ce stade, votre partie script de `App.vue` devrait ressembler √† ceci :

```js
<script>
import axios from "axios";
export default {
  data() {
    return {
      currentDogLink:
        "https://images.dog.ceo/breeds/chihuahua/n02085620_3407.jpg"
    };
  }
};
</script>
```

Nous sommes maintenant pr√™ts √† charger une image √† partir de l'API.

## Appel API

Ex√©cutons notre premier appel d'API. Pour ce faire, nous allons cr√©er une _m√©thode_ `loadNewDog` √† l'int√©rieur de notre composant.

::: tip üí°
La propri√©t√© `methods` est une liste de fonctions qui associ√©es √† un objet, g√©n√©ralement l'instance Vue elle-m√™me ou un composant Vue.
:::

Ajoutons-la juste apr√®s la fonction `data` :

```js
data() {
  return {
    currentDogLink:
      "https://images.dog.ceo/breeds/chihuahua/n02085620_3407.jpg"
  };
},
methods: {
 loadNewDog() {}
}
```

Pour l'instant, cette m√©thode ne fait rien mais nous voulons qu'elle charge une nouvelle image de chien depuis l'API. Nous devons d'abord v√©rifier quel endpoint nous devons utiliser. En regardant la [documentation](https://dog.ceo/dog-api/) de l'API, nous apprenons que nous devons utiliser `https://dog.ceo/api/breeds/image/random`. Il fournira une image al√©atoire de chien.

Pour effectuer une requ√™te GET, Axios utilise la m√©thode `axios.get`. Le r√©sultat sera une promesse JavaScript, nous devons donc fournir des fonctions de callback de r√©ussite et d'√©chec pour g√©rer son cycle de vie. Pour l'instant, imprimons simplement le r√©sultat de la requ√™te dans la console. Toujours dans `App.vue`, modifiez la m√©thode `loadNewDog(){}` en pla√ßant ce code entre les accolades :

```js
axios
	.get('https://dog.ceo/api/breeds/image/random')
	.then((response) => {
		console.log(response);
	})
	.catch((error) => {
		console.log(error);
	});
```

Nous voulons qu'une nouvelle image remplace l'ancienne lorsque le composant est cr√©√©, ajoutons donc un hook `created()` juste apr√®s `methods` :

```js
created() {}
```

::: tip üí°
Remarque : assurez-vous d'ajouter une virgule apr√®s l'objet `methods`, puis ajoutez le hook `created()` !
:::

::: tip üí°
Ceci est le premier hook de cycle de vie de notre application ! Ceux-ci sont tr√®s utiles lorsque vous souhaitez contr√¥ler avec pr√©cision quand ex√©cuter des blocs de code. [En savoir plus](https://fr.vuejs.org/v2/guide/instance.html#Diagramme-du-cycle-de-vie)
:::

√Ä l'int√©rieur du hook cr√©√©, nous appellerons notre m√©thode.

```js
created() {
  this.loadNewDog();
}
```

Maintenant, apr√®s avoir cliqu√© sur le bouton actualiser dans la fen√™tre du navigateur, vous devriez voir un objet dans votre console. Explorez-le en cliquant sur sa fl√®che gauche. Nous sommes int√©ress√©s par son champ `data`. Vous pouvez voir que nous avons un statut `success` et un message avec l'URL d'une image.

::: warning ‚òïÔ∏è Pause! ‚òïÔ∏è
C'est un bon moment de rejoindre un 'breakout room' sur Zoom!
:::

## Utiliser l'API

Rempla√ßons notre `currentDogLink` par celui charg√©. √Ä ce stade, nous pouvons supprimer sa valeur statique :

```js
data() {
  return {
    currentDogLink: ""
  };
},
```

Dans la m√©thode `loadNewDog`, au lieu d'imprimer le r√©sultat sur la console, nous assignerons `response.data.message` (qui est en fait l'URL de l'image) √† la propri√©t√© `currentDogLink` :

```js
loadNewDog() {
  axios
    .get("https://dog.ceo/api/breeds/image/random")
    .then(response => {
      this.currentDogLink = response.data.message;
    })
    .catch(error => {
      console.log(error);
    });
}
```

Maintenant, chaque fois que vous actualiserez la page, vous aurez une nouvelle image de chien ! üéâ

Nous voulons √©galement appeler la m√™me m√©thode lorsque vous cliquez sur la fl√®che ¬´ Suivant ¬ª. Ajoutons un √©v√©nement `click` √† ce bouton. Nous pouvons utiliser la directive `v-on` ou sa syntaxe abr√©g√©e `@`. Dans le template, modifiez l'ic√¥ne `forward` dans le `v-btn` :

```html
<v-btn icon @click="loadNewDog">
	<v-icon>forward</v-icon>
</v-btn>
```

Maintenant, nous pouvons charger de nouvelles images en cliquant simplement sur le bouton ¬´ Suivant ¬ª.

## Cr√©er la liste de favoris

Nous voulons permettre √† un utilisateur d'ajouter des images de chiens √† une liste personnelle de favoris et d'afficher la galerie de ces images juste en-dessous de notre image de chien actuelle. Pour stocker les liens, nous avons besoin d'une autre propri√©t√© de donn√©es : un tableau appel√© `favoriteDogs`. Ajoutons-le juste apr√®s `currentDogLink` et initialisons-le √† vide par d√©faut :

```js
data() {
  return {
    currentDogLink: "",
    favoriteDogs: []
  };
},
```

Pour afficher les chiens mis en favoris, nous devons apporter des modifications √† notre template. Ajoutons l'extrait de code suivant juste apr√®s la balise de fermeture `</v-card>` :

```html
<v-container grid-list-md fluid>
	<v-layout wrap>
		<v-flex xs6 sm4 md2>
			<v-card class="dog-card">
				<v-img height="150px"></v-img>
				<v-card-actions>
					<v-spacer></v-spacer>
					<v-btn icon>
						<v-icon>delete</v-icon>
					</v-btn>
				</v-card-actions>
			</v-card>
		</v-flex>
	</v-layout>
</v-container>
```

Vous pouvez voir une carte vide avec un bouton ¬´ Supprimer ¬ª juste apr√®s l'image de chien actuelle. Maintenant, nous devons trouver un moyen d'afficher les objets `favoriteDogs` √† l'int√©rieur de ces cartes.

Pour afficher une liste d'√©l√©ments bas√©e sur un tableau, Vue a une directive `v-for` qui parcourra ce tableau et rendra chaque √©l√©ment. Ajoutons cette directive √† notre balise d'ouverture `v-flex`, ce qui montrera le tableau des favoris dans le nouveau conteneur que vous venez d'ajouter :

```html
<v-flex xs6 sm4 md2 v-for="(pet, index) in favoriteDogs" :key="pet"></v-flex>
```

Ici, `pet` est la r√©f√©rence √† l'_√©l√©ment de tableau actuel_ et `index` est l'_index de cet √©l√©ment_ √† l'int√©rieur du tableau.

::: tip üí°
N'oubliez pas, nous avons choisi ce nom dans la directive ; si nous avions √©crit `v-for="(dog, number) in favoriteDogs"` chaque √©l√©ment serait appel√© `dog` et son index serait appel√© `number`).
:::

Pour parcourir correctement votre tableau de chiens favoris et en ajouter un autre, vous devez fournir un attribut `key` unique pour chaque √©l√©ment. Dans notre cas, l'objet `pet` lui-m√™me sera la cl√©.

Vous pouvez voir que notre carte vide a disparu. C'est normal ! Nous avons un tableau vide `favoriteDogs`, donc il n'y a tout simplement rien √† afficher pour le moment.

Une chose qui reste √† faire est de lier `pet` (qui sera le lien de l'image) √† la propri√©t√©`src` du composant `v-img` dans les cartes que vous construisez :

```html
<v-img height="150px" :src="pet"></v-img>
```

Il est maintenant temps de mettre en favoris certains chiens üíñüê∂ !

::: warning ‚òïÔ∏è Pause! ‚òïÔ∏è
C'est un bon moment de rejoindre un 'breakout room' sur Zoom!
:::

## Ajout aux favoris

Nous allons cr√©er une nouvelle m√©thode appel√©e `addToFavorites`. Elle ajoutera la valeur de `currentDogLink` au tableau`favoriteDogs` (JavaScript a une m√©thode de tableau `push` pr√©vue √† cet effet). Pla√ßons-la apr√®s `loadNewDog` (n'oubliez pas la virgule !) :

```js
addToFavorites() {
  this.favoriteDogs.push(this.currentDogLink);
}
```

Et bien s√ªr, nous devons lier la m√©thode au bouton ¬´ J'aime ¬ª dans la carte du haut :

```html
<v-btn icon @click="addToFavorites">
	<v-icon>favorite</v-icon>
</v-btn>
```

Maintenant, essayez de cliquer sur le bouton ¬´ J'aime ¬ª ! Vous pouvez voir comment notre galerie se remplit d'images des chiens üñºÔ∏è

Il y a un probl√®me : nous pouvons maintenant ajouter une image aux favoris plusieurs fois. Pour √©viter cela, nous devons v√©rifier si le `currentDogLink` est d√©j√† √† l'int√©rieur du tableau `favoriteDogs`, et, s'il l'est, nous d√©sactiverons le bouton ¬´ J'aime ¬ª. Au lieu de placer cette logique complexe √† l'int√©rieur du mod√®le, nous allons cr√©er une _propri√©t√© calcul√©e_.

::: tip üí°
Les propri√©t√©s calcul√©es peuvent √™tre utilis√©es pour effectuer des calculs rapides des propri√©t√©s affich√©es dans la vue. Ces calculs seront mis en cache et ne seront mis √† jour que lorsque leurs d√©pendances seront modifi√©es.
:::

Ajoutons l'objet `computed` juste apr√®s le hook `created()` (n'oubliez pas la virgule apr√®s la fermeture de `created()`) et cr√©ons une propri√©t√© nomm√©e `isAlreadyInFavorites` dedans.

```js
  computed: {
    isAlreadyInFavorites() {}
  }
```

Toute propri√©t√© calcul√©e doit √™tre une fonction renvoyant le r√©sultat des calculs. V√©rifions l'index de `currentDogLink` √† l'int√©rieur du tableau `favoriteDogs`. Si elle est sup√©rieure √† -1 (en d'autres termes si le tableau contient un tel √©l√©ment), la fonction renverra `true`, sinon elle renverra`false` :

```js
computed: {
	isAlreadyInFavorites() {
	  return this.favoriteDogs.indexOf(this.currentDogLink) > -1;
	}
}
```

Maintenant, nous pouvons ajouter un attribut dynamique `disabled` au bouton ¬´ J'aime ¬ª dans la carte du dessus et le d√©finir √† `isAlreadyInFavorites`.

```html
<v-btn icon @click="addToFavorites" :disabled="isAlreadyInFavorites">
	<v-icon>favorite</v-icon>
</v-btn>
```

Essayez d'ajouter le chien aux favoris. Vous pouvez maintenant voir que le bouton ¬´ J'aime ¬ª est gris√© et vous ne pouvez plus cliquer dessus.

## Suppression des favoris

Et si vous n'aimez plus une des images de chien ? Dans ce cas improbable, vous aurez besoin d'un moyen de la supprimer du tableau `favoriteDogs`. Nous avons besoin d'une m√©thode de plus pour cela, alors ajoutons-la apr√®s le `addToFavorites` (ajoutez une virgule apr√®s le crochet de fermeture de `addToFavorites`) :

```js
removeFromFavorites() {}
```

Bien s√ªr, nous devons sp√©cifier en quelque sorte quel chien nous voulons supprimer du tableau. Heureusement, nous avons le param√®tre `index`. Passons-le √† notre m√©thode et supprimons l'√©l√©ment avec l'index donn√© du tableau `favoriteDogs` :

```js
removeFromFavorites(index) {
  this.favoriteDogs.splice(index, 1);
}
```

::: tip üí°
Ici, la m√©thode `splice()` modifie le contenu d'un tableau en supprimant les √©l√©ments existants. Le premier argument est l'indice de l'√©l√©ment avec lequel nous voulons commencer et le deuxi√®me argument est le nombre d'√©l√©ments que nous voulons supprimer.
:::

Maintenant, nous devons lier cette nouvelle m√©thode au bouton ¬´ Supprimer ¬ª :

```html
<v-btn icon @click="removeFromFavorites(index)">
	<v-icon>delete</v-icon>
</v-btn>
```

::: tip üí°
N'oubliez pas de passer `index` √† la m√©thode`removeFromFavorites` ! Lorsque nous ne transmettons aucun param√®tre, nous pouvons simplement ignorer les parenth√®ses comme nous l'avons fait pour la m√©thode `addToFavorites`.
:::

Essayez d'ajouter et de supprimer certains chiens de vos favoris. √áA FONCTIONNE !

**üéä F√©licitations, vous avez termin√© le projet de base ! üéä**

## Suppl√©ment 1 : Cr√©ation d'un composant Dog

√Ä ce stade, nous voulons extraire une carte de la grille des favoris dans un composant distinct pour apprendre comment les composants parents et enfants communiquent.

Nous avons un dossier `components` mais pour l'instant il est vide. Cr√©ons un nouveau fichier ici et appelons-le `Dog.vue`.

Ouvrez ce fichier et ajoutez les balises `<template></template>` et `<script></script>`. Maintenant, notre fichier ressemble √† ceci :

```html
<template> </template>

<script></script>
```

Copiez maintenant tout le composant `v-card` qui contient les chiens favoris (il est pr√®s du bas, et a la classe CSS `dog-card`) depuis `App.vue` et collez-le dans la balise de mod√®le. Vous pouvez le supprimer de `App.vue`.

Nous avons maintenant besoin d'un moyen de transmettre l'image du chien que nous voulons voir du parent √† l'enfant. Pour ce faire, Vue utilise des props.

::: tip üí°
Les props sont des attributs personnalisables que vous pouvez enregistrer dans un composant. Quand valeur est pass√©e √† un attribut prop, elle devient une _propri√©t√©_ de l'instance du composant. Dans notre cas, le composant `Dog` aura une propri√©t√© `dog`, transmise √† partir de son composant parent `App`.
:::

Ajoutons une option `props` √† notre composant `Dog.vue`. Tout d'abord, nous devons cr√©er une d√©claration d'exportation √† l'int√©rieur de notre balise `script` (donc plus tard, nous pourrons importer notre composant `Dog` √† l'int√©rieur de `App`). Ajoutez ce bloc de code √† `Dog.vue` :

```html
<script>
	export default {};
</script>
```

Maintenant, nous pouvons ajouter une option `props` √† cet objet et une propri√©t√© `dog`:

```html
<script>
	export default {
		props: {
			dog: {
				type: String,
			},
		},
	};
</script>
```

Ici, nous sp√©cifions √©galement le type de notre propri√©t√© `dog` : ce sera une cha√Æne de caract√®res contenant l'URL de l'image du chien.

Dans notre template dans `Dog.vue`, nous devons remplacer `pet` par `dog`, car nous n'avons aucun `pet` √† l'int√©rieur du composant `Dog`, seulement une propri√©t√© `dog`. Maintenant, notre mod√®le devrait ressembler √† ceci :

```html
<template>
	<v-card class="dog-card">
		<v-img height="150px" :src="dog"></v-img>
		<v-card-actions>
			<v-spacer></v-spacer>
			<v-btn icon @click="removeFromFavorites(index)">
				<v-icon>delete</v-icon>
			</v-btn>
		</v-card-actions>
	</v-card>
</template>
```

Revenons maintenant √† notre composant `App.vue` et apportons quelques modifications. Tout d'abord, nous devons importer notre composant `Dog` nouvellement cr√©√© dans `App.vue`. Ajoutez ce code avant l'instruction `export default` dans le bloc`<script>` :

```js
import Dog from './components/Dog';
```

Maintenant, nous devons ¬´ expliquer ¬ª au composant `App` qu'il contient un composant enfant. Vue utilise pour cela une option `components`. Ajoutons cette option au-dessus de celle de `data()` :

```js
export default {
  components: {
    appDog: Dog
  },
  data() {
    return {
      currentDogLink: "",
      favoriteDogs: []
    };
  },
```

::: tip üí°
Pour chaque propri√©t√© de l'objet `components`, la cl√© sera le nom de l'√©l√©ment personnalis√©, tandis que la valeur contiendra le composant.
:::

::: tip üí°
Pour le nom du composant, vous pouvez utiliser l'√©criture camel-case (`appDog`) ou kebab-case (`'app-dog'`). Gardez √† l'esprit qu'un nom √©crit en camel-case sera ¬´ traduit ¬ª en √©criture kebab-case dans les noms de balises HTML. Nous allons donc utiliser la balise HTML personnalis√©e `<app-dog>` et elle rendra un composant `Dog`.
:::

Dans `App.vue`, placez la balise personnalis√©e dans l'espace o√π vous avez supprim√© la carte plus t√¥t, en √©crasant la balise `<v-flex>` :

```html
<v-flex xs6 sm4 md2 v-for="(pet, index) in favoriteDogs" :key="pet">
	<app-dog></app-dog>
</v-flex>
```

Nous devons passer une propri√©t√© `dog` √† notre composant `Dog`. Cela se fait avec la directive `v-bind` (rappelez-vous, vous pouvez utiliser sa syntaxe abr√©g√©e `:`). Modifiez le code que vous venez d'ajouter √† `App.vue` :

```html
<v-flex xs6 sm4 md2 v-for="(pet, index) in favoriteDogs" :key="pet">
	<app-dog :dog="pet" @remove="removeFromFavorites(index)"></app-dog>
</v-flex>
```

Maintenant, si vous essayez d'ajouter un chien aux favoris, vous verrez √† nouveau les chiens dans la grille ! Mais nous avons un probl√®me : la suppression d'un chien entra√Ænera un tas d'erreurs dans la console. La raison est que nous n'avons pas de m√©thode `removeFromFavorites` √† l'int√©rieur de `Dog.vue` et qu'il ne sait rien du tout sur `index`.

Au lieu d'utiliser la m√©thode, nous la remplacerons par un _√©metteur d'√©v√©nement_ sur le bouton `delete` √† l'int√©rieur du composant Dog.

```html
<v-btn icon @click="$emit('remove')"></v-btn>
```

En utilisant `$emit`, nous envoyons un message √† notre composant parent (dans ce cas, c'est `App.vue`): ¬´ Bonjour, quelque chose se passe ici ! Veuillez lire ce message et y r√©agir ¬ª.

Maintenant, lorsque le composant `Dog` √©met l'√©v√©nement `remove` (c'est-√†-dire lorsque vous cliquez sur le bouton ¬´ Supprimer ¬ª), son composant parent `App` appellera la m√©thode `removeFromFavorites` (qui supprime un chien du tableau de favoris).

**üéä Vous avez termin√© le suppl√©ment 1 ! üéä**

## Suppl√©ment 2 : Ajout d'animations

Rendons maintenant notre application plus attrayante en y ajoutant des effets d'animation.

::: tip üí°
Vue fournit un composant wrapper `transition`, vous permettant d'ajouter des transitions d'entr√©e / sortie pour tout √©l√©ment ou composant dans les contextes suivants :

-   Rendu conditionnel (en utilisant `v-if`)
-   Affichage conditionnel (en utilisant `v-show`)
-   Composants dynamiques
-   N≈ìuds racine des composants
    :::

Essayons d'animer l'image de chien actuelle. Tout d'abord, nous devons lui ajouter une directive `v-if` pour fournir le contexte appropri√© pour la future transition. Dans `App.vue`, modifiez la carte principale :

```html
<v-img v-if="currentDogLink" height="400px" :src="currentDogLink"></v-img>
```

Mais maintenant, `currentDogLink` retournera toujours `true` ! Mettons la cha√Æne √† vide √† chaque fois que nous cliquons sur le bouton ¬´ Suivant ¬ª, donc avant que l'image suivante ne soit charg√©e, `currentDogLink` retournera`false` :

```js
loadNewDog() {
  this.currentDogLink = "";
  axios.get("https://dog.ceo/api/breeds/image/random").then(response => {
    this.currentDogLink = response.data.message;
  });
},
```

Vous pouvez maintenant observer cet effet laid : l'image dispara√Æt √† chaque fois que l'utilisateur clique sur ¬´ Suivant ¬ª. Nous allons corriger cela avec l'effet d'animation de fondu. Enveloppons le `v-img` dans une balise `<transition>`et mettons un attribut nom avec comme valeur `fade`.

```html
<transition name="fade">
	<v-img v-if="currentDogLink" height="400px" :src="currentDogLink"></v-img>
</transition>
```

Cela nous donnera un tas de classes CSS √† partir de `fade-`. Il y aura `enter` / `leave` qui sont les positions avec lesquelles commence l'animation sur la premi√®re image, `enter-active` / `leave-active` pendant que l'animation est en cours d'ex√©cution (c'est celle avec laquelle vous placez les propri√©t√©s d'animation elles-m√™mes), et `enter-to` / `leave-to`, qui sp√©cifient o√π l'√©l√©ment doit √™tre sur la derni√®re image.

Maintenant que nous avons nos hooks, nous pouvons cr√©er la transition en les utilisant. Modifiez le CSS dans `App.vue` en ajoutant les classes suivantes :

```css
.fade-enter-active,
.fade-leave-active {
	transition: opacity 1s ease;
}
.fade-enter,
.fade-leave-to {
	opacity: 0;
}
```

Les classes `.fade-enter-active` et `.fade-Leave-active` seront les endroits o√π nous appliquerons la transition r√©elle. Ce n'est rien de sp√©cifique √† Vue, juste du CSS normal. La propri√©t√© `ease` sp√©cifie un effet de transition avec un d√©marrage lent, puis rapide, puis se terminant lentement.

Vous pouvez maintenant voir que l'image du chien a un bel effet de fondu lorsque vous cliquez sur ¬´ Suivant ¬ª !

Ajoutons √©galement quelques effets √† notre grille de favoris. Pour animer la liste rendue avec `v-for`, Vue utilise la balise`transition-group`.

::: tip üí°
Contrairement √† `<transition>`, `transition-group` rend un √©l√©ment r√©el : une balise `<span>` par d√©faut. Vous pouvez modifier l'√©l√©ment rendu avec l'attribut tag.
Les √©l√©ments √† l'int√©rieur doivent toujours avoir un attribut `key` unique.
:::

Dans `App.vue`, remplacez le composant `<v-layout>` entourant le composant imbriqu√© `<app-dog>` par `v-transition-group` et d√©finissez-lui une classe et une balise appropri√©s :

```html
<transition-group name="slide" tag="v-layout" class="wrap">
	<v-flex xs6 sm4 md2 v-for="(pet, index) in favoriteDogs" :key="pet">
		<app-dog :dog="pet" @remove="removeFromFavorites(index)"></app-dog>
	</v-flex>
</transition-group>
```

`transition-group` sera maintenant rendu en tant que composant `v-layout`. La classe `wrap` est n√©cessaire pour encapsuler les √©l√©ments de la grille √† la ligne suivante (elle remplace l'attribut `wrap` de `v-layout`). Nous avons √©galement donn√© √† notre nouvelle transition le nom `slide`.

Maintenant, nous pouvons utiliser des classes CSS pour d√©crire la transition des diapositives. Ajoutez ces classes au CSS dans `App.vue` :

```css
.slide-enter-active {
	transition: all 0.3s ease;
}
.slide-enter,
.slide-leave-to {
	transform: translateX(10px);
	opacity: 0;
}
```

G√©nial ! Nous avons une belle animation lorsque nous ajoutons un nouveau favori √† la grille. Mais il n'y a aucun effet sur la suppression. Il existe une classe `-move`, qui est ajout√©e lorsque les √©l√©ments changent de position. Comme les autres classes, son pr√©fixe correspondra √† la valeur d'un attribut `name` fourni (`slide` dans notre cas). Nous devons donc ajouter quelques styles suppl√©mentaires :

```css
.slide-leave-active {
	position: absolute;
}

.slide-move {
	transition: transform 0.5s;
}
```

::: tip üí°
Remarquez `position: absolute` sur les √©l√©ments qui partent ! C'est fait pour les retirer du flux naturel, d√©clenchant la transition de mouvement sur le reste des objets.
:::

Maintenant, notre liste a une belle animation de mouvement apr√®s avoir supprim√© un de ses √©l√©ments !

**üéä Vous avez termin√© le suppl√©ment 2 ! üéä**

## Auteure

Fait avec ‚ù§Ô∏è par Natalia Tepluhina, mis √† jour par Jen Looper
